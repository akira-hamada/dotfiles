#-----------------------------------------------------
# tmux references
#  - cheatsheet: https://qiita.com/nmrmsys/items/03f97f5eabec18a3a18b
#  - official: https://github.com/tmux/tmux/wiki
#  - https://qiita.com/nl0_blu/items/9d207a70ccc8467f7bab
#  - https://qiita.com/shoma2da/items/2e68c1e59938eb0c2f83
#  - https://qiita.com/kalafinalice/items/c02c0345293fe60af6e5
#  - https://mynavi-agent.jp/it/geekroid/2017/03/-11tmux.html

# tmux way
#  - https://qiita.com/nl0_blu/items/9d207a70ccc8467f7bab#tmux%E3%81%AE%E6%A7%8B%E6%88%90%E8%A6%81%E7%B4%A0
#  - http://kanjuku-tomato.blogspot.com/2014/02/tmux.html
#-----------------------------------------------------

#-----------------------------------------------------
# # tmux How To Use
#
# ## Session handling
#
# - create session with name `my_session_name`: $ tmux new -s my_session_name
#   - rename session: $ tmux rename -t old_session_name new_session_name (`PREFIX $` in a session)
# - detach session: PREFIX d
# - attach to session of name `my_session_name`: $ tmux a -t my_session_name
#   - attach to the last session: $ tmux a
# - list all sessions: $ tmux ls (`PREFIX l`)
# - quit session: $ tmux kill-session [-t <対象セッション名>]
# - kill all sessions(quit tmux completely): $ tmux kill-server
#
# ## Pain handling

# - move to next pain: PREFIX o
#
# ## etc
#
# - reload tmux config: $ tmux source-file ~/.tmux.conf
# - display key binds: PREFIX ?
# - print tmux version: $ tmux -V
#-----------------------------------------------------

#-----------------------------------------------------
# Settings for tmux
#   to reload tmux config: `PREFIX r` (or $ tmux source-file ~/.tmux.conf)
# TODO
#  - use tpm; tmux plugin manager: https://github.com/tmux-plugins/tpm
#  - use tmux doracula color theme: https://draculatheme.com/tmux
#-----------------------------------------------------

# tmux起動時のシェルをzshにする
set-option -g default-shell /bin/zsh

# tmuxを256色表示できるようにする
set-option -g default-terminal screen-256color
set -g terminal-overrides 'xterm:colors=256'

# prefixキーをC-fに変更
set -g prefix C-f

# C-bのキーバインドを解除
unbind C-b

# ステータスバーをトップに配置する
set-option -g status-position top

# 左右のステータスバーの長さを決定する 
# set-option -g status-left-length 90
# set-option -g status-right-length 90

# #P => ペイン番号
# 最左に表示
set-option -g status-left '#H:[#P]'

# Wi-Fi、バッテリー残量、現在時刻
# 最右に表示
# set-option -g status-right '#(wifi) #(battery --tmux) [%Y-%m-%d(%a) %H:%M]'

# ステータスバーを1秒毎に描画し直す
set-option -g status-interval 1

# センタライズ（主にウィンドウ番号など）
# set-option -g status-justify centre

# ステータスバーの色を設定する
set-option -g status-bg "colour238"

# status line の文字色を指定する。
set-option -g status-fg "colour255"

# vimのキーバインドでペインを移動する
# or change pains in clockwise: `PREFIX o`
# bind h select-pane -L
# bind j select-pane -D
# bind k select-pane -U
# bind l select-pane -R

# list sessions and pains
# ref for choose mode: https://qiita.com/vintersnow/items/3d7e25d520bc7deefc77
bind l choose-tree -Zw

# reload tmux config
bind r source-file ~/.tmux.conf

# vimのキーバインドでペインをリサイズする
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# | でペインを縦分割する
bind | split-window -h

# - でペインを縦分割する
bind - split-window -v

## アクティブなペインのみ白っぽく変更（真っ黒は232）
set -g window-style 'bg=colour239'
set -g window-active-style 'bg=colour234'

# 番号基準値を変更
# set-option -g base-index 1

# マウス操作を有効にする
set-option -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

# コピーモードを設定する
# コピーモードでvimキーバインドを使う
setw -g mode-keys vi

# 'v' で選択を始める
# bind -T copy-mode-vi v send -X begin-selection

# # 'V' で行選択
# bind -T copy-mode-vi V send -X select-line

# # 'C-v' で矩形選択
# bind -T copy-mode-vi C-v send -X rectangle-toggle

# # 'y' でヤンク
# bind -T copy-mode-vi y send -X copy-selection

# # 'Y' で行ヤンク
# bind -T copy-mode-vi Y send -X copy-line

# 'C-p'でペースト
# bind-key C-p paste-buffer
